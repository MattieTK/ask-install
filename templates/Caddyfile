# DO NOT EDIT FILE, AUTOGENERATED.
#
# Reuse the ask-install after editing the config file and re-run the ask-install
# tool with `-s`:
#
#  ask-install -s
#

{{ .Hostname }} {

  log stdout

  {{ if .SlackNotificationsEnabled -}}
  # slackd askd proxy
  proxy /askd/ http://slack/ {
    without /askd
    transparent
  }
  {{- else -}}
  # askd proxy
  proxy /askd/ http://askd/ {
    without /askd
    transparent
  }
  {{- end }}

  # elkhorn proxy
  proxy /elkhorn/ http://elkhorn:4444/ {
    without /elkhorn
    transparent
  }

  # auth proxy
  proxy /auth/ http://auth/ {
    without /auth
    transparent
  }

  {{ if not .UseS3 -}}
  # static files
  root /var/www
  {{- else -}}
  # Disabled as S3 was enabled
  # # static files
  # root /var/www
  {{- end }}

  # cay
  proxy / http://cay/ {
    {{ if not .UseS3 -}}
    # Serves widget html
    except /widgets
    {{- else -}}
    # Disabled as S3 was enabled
    # # Serves widget html
    # except /widgets
    {{- end }}

    transparent
  }

}
